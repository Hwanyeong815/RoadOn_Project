@use 'sass:math';
@use '../../../styles/utils' as *;

.coupon-event-container {
    position: relative;
    overflow-x: hidden;
    padding: vw(30) 0;

    .coupon-header {
        .head {
            color: $greyscale-1200;
            @include font-55px-B;
            margin-bottom: vw(30);

            span {
                font-weight: 400;
            }
        }

        .subhead {
            @include font-20px-M;
            line-height: 150%;
        }

        .coupon_down {
            position: absolute;
            top: vw(40);
            right: 0;
        }
    }

    .couponbg {
        position: absolute;
        top: 100%;
        right: -30%;
    }

    // 공통 아이템
    .coupon-item {
        position: relative;
        transition: all 0.3s ease;
        filter: drop-shadow(0 vw(5) vw(15) rgba($black, 0.1));

        .coupon-image {
            display: block;
            min-width: vw(260);
            height: auto;
            max-width: 100%;
            user-select: none;
            -webkit-user-drag: none;
            border-radius: vw(12);
            gap: vw(83); // (필요 시 부모 flex/grid에서만 적용)
            pointer-events: none;
        }
    }
}

// 스켈레톤 (이미지 미로딩 상태)
.coupon-image[src=''] {
    background: linear-gradient(90deg, #f0f0f0 25%, transparent 37%, #f0f0f0 63%);
    background-size: 400% 100%;
    animation: skeleton-loading 1.4s ease infinite;
}

// 마키 롤링
.marquee-wrapper {
    position: relative;
    overflow: hidden;
    width: 100%;
    height: max-content;

    .marquee {
        display: flex;
        will-change: transform;
        padding-bottom: vw(120);

        .coupon-item {
            flex: 0 0 auto;
            margin: 0 vw(16);

            .coupon-image {
                width: vw(140);
            }
        }
    }
}

// =======================================
// 📱 Tablet → Mobile 구간 (px → 390 기준 vw)
// =======================================
@include tablet {
    @include mobile {
        .coupon-event-container {
            width: 100%;

            .coupon-header {
                .head {
                    @include font-20px-B;
                }
                .subhead {
                    display: none;
                }

                .coupon_down {
                    position: relative;
                    width: 100%;

                    .coupon-button-wrap {
                        width: 100%;
                        height: 100%;

                        button {
                            width: 35.8974vw; // 그대로 유지
                            height: 8.9744vw; // 그대로 유지
                            @include font-16px;
                            border-radius: 102.5641vw;
                            line-height: 1;
                        }
                    }
                }
            }

            .couponbg {
                // 280px, 70px → 390 기준 vw
                width: 71.7949vw; // 280 / 390 * 100
                height: 17.9487vw; // 70  / 390 * 100

                img {
                    width: 100%;
                }
            }
        }

        .marquee-wrapper {
            // 210px → 390 기준 vw
            height: 53.8462vw; // 210 / 390 * 100
            display: flex;
            align-items: center;

            .marquee {
                align-items: center;

                .coupon-item {
                    width: 29.2308vw;
                    img {
                        width: 100% !important;
                    }
                }
            }
        }
    }
}
