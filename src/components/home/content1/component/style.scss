@use '../../../../styles/utils/' as *;

.right {
    pointer-events: none;
    position: absolute;
    top: 0;
    right: -5%;
    width: vw(1050);
    aspect-ratio: 1 / 1;
    z-index: 10;
    background: transparent;

    --orbit-offset-x: #{vw(120)};
    --orbit-offset-y: vw(0);
    /* ✅ JS에서 쓰는 클래스와 맞추기 (wrap → stage) */
    &-shape-stage {
        position: absolute;
        inset: 0;
        transform: scale(var(--scale, 1));
        transform-origin: top right;
        pointer-events: none;
    }
    &-shape-wrap {
        position: absolute;
        top: 0;
        right: 0%;

        width: vw(1379);
        height: vw(1379);
        transform-origin: top right;
        transform: scale(var(--scale, 1)); /* 👈 JS에서 --scale 주입 */
        pointer-events: none;
    }
    &-shape {
        position: absolute;
        z-index: 15; /* ★ 블롭 위 */
        offset-path: var(--orbit-path);
        offset-rotate: 0deg;
        will-change: offset-distance;
        background: $white;
        overflow: hidden;
        pointer-events: none;
        .img-wrap {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: inherit;
            overflow: hidden;
        }
        img {
            width: 100%;
            height: 100%;
            display: block; /* 이미지 하단 여백 제거 */
            object-fit: cover; /* 꽉 채우기(잘라도 됨) */
            object-position: center; /* 중앙 기준으로 자르기 */
            border-radius: inherit; /* 모양 따라가게 */
            /* 성능 미세 튜닝(선택) */
            backface-visibility: hidden;
            transform: translateZ(0);
        }
        &.top {
            offset-distance: 12%;
        }
        &.center {
            offset-distance: 48%;
        }
        &.bottom {
            offset-distance: 85%;
        }
        /* 도착 스냅: 크기/라디우스 (트윈 금지) */
        &.as-top {
            width: vw(625);
            height: vw(560);
            border-radius: 56% 44% 54% 46% / 72% 70% 30% 28%;
        }
        &.as-center {
            width: vw(820);
            height: vw(820);
            border-radius: 60% 40% 30% 70% / 55% 67% 33% 45%;
        }
        &.as-bottom {
            width: vw(605);
            height: vw(570);
            border-radius: 73% 27% 41% 59% / 37% 19% 81% 63%;
        }
        /* 현재 위치 상태표시 (원하면 강조) */
        &.at-center {
            filter: drop-shadow(0 vw(10) vw(30) rgba($black, 0.1));
        }
        &.at-top,
        &.at-bottom {
            filter: none;
        }

        /* 이동 중 상태 표시 (선택적) */
        &.moving-to-center {
            outline: 2px solid rgba(255, 255, 255, 0.25);
        }
        &.moving-to-top,
        &.moving-to-bottom {
            outline: none;
        }
    }
    .circle-line {
        position: absolute;
        top: 0;
        right: -40%;
        width: vw(1379);
        height: vw(1379);
        transform-origin: top right;
        pointer-events: none;
        path {
            stroke: #acacac;
            stroke-width: 1;
            fill: #acacac;
        }
    }
}
